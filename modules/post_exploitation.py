#!/usr/bin/env python3

import subprocess
import sys
from colorama import Fore, Style

def run():
    print(f"{Fore.CYAN}\n[+] Post-Exploitation Module")
    print(f"{Fore.YELLOW}[*] Available tools:")
    print("1. Metasploit - Post-exploitation modules")
    print("2. Empire - PowerShell post-exploitation")
    print("3. Mimikatz - Credential dumping")
    print("4. BloodHound - Active Directory analysis")
    
    choice = input(f"{Fore.WHITE}[?] Select tool: ").strip()
    
    if choice == "1":
        print(f"{Fore.GREEN}[+] Starting Metasploit Framework...")
        subprocess.run(["msfconsole"])
    
    elif choice == "2":
        print(f"{Fore.YELLOW}[*] Starting Empire...")
        empire_path = "/opt/Empire/empire"
        if subprocess.run(["which", "empire"], capture_output=True).returncode == 0:
            subprocess.run(["empire"])
        else:
            print(f"{Fore.RED}[!] Empire not installed. Install from: https://github.com/BC-SECURITY/Empire")
    
    elif choice == "3":
        print(f"{Fore.YELLOW}[*] Mimikatz usage:")
        print(f"{Fore.WHITE}  - Download from: https://github.com/gentilkiwi/mimikatz")
        print(f"{Fore.WHITE}  - Use on compromised Windows systems")
        print(f"{Fore.WHITE}  - Commands: privilege::debug, sekurlsa::logonpasswords")
    
    elif choice == "4":
        print(f"{Fore.YELLOW}[*] Starting BloodHound...")
        if subprocess.run(["which", "bloodhound"], capture_output=True).returncode == 0:
            subprocess.run(["bloodhound"])
        else:
            print(f"{Fore.RED}[!] BloodHound not installed. Install with: sudo apt install bloodhound")
    
    else:
        print(f"{Fore.RED}[!] Invalid selection")